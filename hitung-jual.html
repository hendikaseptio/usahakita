<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kalkulator Harga Jual Produk</title>

    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
            padding-bottom: 50px;
        }

        .form-section {
            margin-top: 2rem;
        }

        .results {
            margin-top: 2rem;
        }

        .table td,
        .table th {
            vertical-align: middle;
        }
    </style>
</head>

<body>

    <div class="container py-4">
        <h1 class="text-center mb-4"><i class="bi bi-calculator"></i> Kalkulator Harga Jual</h1>

        <!-- Informasi Produk -->
        <div class="card shadow-sm form-section">
            <div class="card-header bg-primary text-white">
                Informasi Produk
            </div>
            <div class="card-body row g-3">
                <div class="col-md-6">
                    <label class="form-label">Nama Produk</label>
                    <input type="text" class="form-control" id="productName" placeholder="Contoh: Kaos Custom" />
                </div>
                <div class="col-md-3">
                    <label class="form-label">Jumlah Produk</label>
                    <input type="number" class="form-control" id="jumlahProduk" min="1" />
                </div>
                <div class="col-md-3">
                    <label class="form-label">Margin (%)</label>
                    <input type="number" class="form-control" id="margin" min="0" />
                </div>
            </div>
        </div>

        <!-- Bahan Baku -->
        <div class="card shadow-sm form-section">
            <div class="card-header bg-success text-white">
                Bahan Baku
            </div>
            <div class="card-body">
                <div class="row g-3 align-items-end">
                    <div class="col-md-6">
                        <label class="form-label">Nama Bahan</label>
                        <input type="text" class="form-control" id="namaBahan" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Harga (Rp)</label>
                        <input type="number" class="form-control" id="hargaBahan" min="0" />
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-success w-100" onclick="tambahBahan()">
                            <i class="bi bi-plus-circle"></i> Tambah
                        </button>
                    </div>
                </div>

                <div class="table-responsive mt-3">
                    <table class="table table-bordered table-striped" id="tabelBahan">
                        <thead class="table-light">
                            <tr>
                                <th>Nama Bahan</th>
                                <th>Harga</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Jasa -->
        <div class="card shadow-sm form-section">
            <div class="card-header bg-warning">
                Jasa / Tenaga Kerja
            </div>
            <div class="card-body">
                <div class="row g-3 align-items-end">
                    <div class="col-md-6">
                        <label class="form-label">Nama Jasa</label>
                        <input type="text" class="form-control" id="namaJasa" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Biaya (Rp)</label>
                        <input type="number" class="form-control" id="biayaJasa" min="0" />
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-warning w-100" onclick="tambahJasa()">
                            <i class="bi bi-plus-circle"></i> Tambah
                        </button>
                    </div>
                </div>

                <div class="table-responsive mt-3">
                    <table class="table table-bordered table-striped" id="tabelJasa">
                        <thead class="table-light">
                            <tr>
                                <th>Nama Jasa</th>
                                <th>Biaya</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Lain-lain -->
        <div class="card shadow-sm form-section">
            <div class="card-header bg-secondary text-white">
                Biaya Lainnya
            </div>
            <div class="card-body row g-3">
                <div class="col-md-6">
                    <label class="form-label">Transportasi (Rp)</label>
                    <input type="number" class="form-control" id="transportasi" min="0" value="0" />
                </div>
                <div class="col-md-6">
                    <label class="form-label">Operasional (Rp)</label>
                    <input type="number" class="form-control" id="operasional" min="0" value="0" />
                </div>
            </div>
        </div>

        <!-- Tombol Hitung -->
        <div class="text-center mt-4">
            <button class="btn btn-primary btn-lg" onclick="hitungHargaJual()">
                <i class="bi bi-calculator-fill"></i> Hitung Harga Jual
            </button>
        </div>

        <!-- Hasil -->
        <div class="card shadow-sm results" id="hasil" style="display:none;">
            <div class="card-header bg-info text-white">
                Hasil Perhitungan
            </div>
            <div class="card-body">
                <p><strong>Nama Produk:</strong> <span id="outputNamaProduk"></span></p>
                <p><strong>Total Biaya Produksi:</strong> Rp <span id="totalBiaya"></span></p>
                <p><strong>Biaya per Produk:</strong> Rp <span id="biayaPerProduk"></span></p>
                <p><strong>Harga Jual per Produk:</strong> Rp <span id="hargaJual"></span></p>
                <p><strong>Pendapatan Kotor:</strong> Rp <span id="totalPendapatan"></span></p>
                <p><strong>Pendapatan Bersih:</strong> Rp <span id="pendapatanBersih"></span></p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript Kalkulasi -->
    <script>
        const bahanList = [];
        const jasaList = [];

        function tambahBahan() {
            const nama = document.getElementById('namaBahan').value.trim();
            const harga = parseFloat(document.getElementById('hargaBahan').value);
            if (nama && harga >= 0) {
                bahanList.push({ nama, harga });
                tampilkanBahan();
                document.getElementById('namaBahan').value = '';
                document.getElementById('hargaBahan').value = '';
            }
        }

        function tampilkanBahan() {
            const tbody = document.querySelector('#tabelBahan tbody');
            tbody.innerHTML = '';
            bahanList.forEach((b, index) => {
                const row = `
                <tr>
                    <td>${b.nama}</td>
                    <td>Rp ${b.harga.toLocaleString('id-ID')}</td>
                    <td>
                    <button class="btn btn-sm btn-danger" onclick="hapusBahan(${index})">
                        <i class="bi bi-trash"></i>
                    </button>
                    </td>
                </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function hapusBahan(index) {
            if (confirm("Hapus bahan ini?")) {
                bahanList.splice(index, 1);
                tampilkanBahan();
            }
        }

        function tambahJasa() {
            const nama = document.getElementById('namaJasa').value.trim();
            const biaya = parseFloat(document.getElementById('biayaJasa').value);
            if (nama && biaya >= 0) {
                jasaList.push({ nama, biaya });
                tampilkanJasa();
                document.getElementById('namaJasa').value = '';
                document.getElementById('biayaJasa').value = '';
            }
        }

        function tampilkanJasa() {
            const tbody = document.querySelector('#tabelJasa tbody');
            tbody.innerHTML = '';
            jasaList.forEach((j, index) => {
                const row = `
                <tr>
                    <td>${j.nama}</td>
                    <td>Rp ${j.biaya.toLocaleString('id-ID')}</td>
                    <td>
                    <button class="btn btn-sm btn-danger" onclick="hapusJasa(${index})">
                        <i class="bi bi-trash"></i>
                    </button>
                    </td>
                </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function hapusJasa(index) {
            if (confirm("Hapus jasa ini?")) {
                jasaList.splice(index, 1);
                tampilkanJasa();
            }
        }


        function hitungHargaJual() {
            const namaProduk = document.getElementById('productName').value.trim();
            const jumlah = parseInt(document.getElementById('jumlahProduk').value);
            const margin = parseFloat(document.getElementById('margin').value);
            const transportasi = parseFloat(document.getElementById('transportasi').value);
            const operasional = parseFloat(document.getElementById('operasional').value);

            if (!namaProduk || jumlah <= 0 || isNaN(margin)) {
                alert("Isi semua data produk dengan benar.");
                return;
            }

            const bahanPerProduk = bahanList.reduce((sum, b) => sum + b.harga, 0);
            const jasaPerProduk = jasaList.reduce((sum, j) => sum + j.biaya, 0);
            const biayaLainPerProduk = (transportasi + operasional) / jumlah;

            const biayaPerProduk = bahanPerProduk + jasaPerProduk + biayaLainPerProduk;
            const totalBiaya = biayaPerProduk * jumlah;
            const hargaJual = biayaPerProduk + (biayaPerProduk * margin / 100);
            const totalPendapatan = hargaJual * jumlah;
            const pendapatanBersih = totalPendapatan - totalBiaya;

            document.getElementById('outputNamaProduk').textContent = namaProduk;
            document.getElementById('totalBiaya').textContent = totalBiaya.toLocaleString('id-ID');
            document.getElementById('biayaPerProduk').textContent = biayaPerProduk.toLocaleString('id-ID');
            document.getElementById('hargaJual').textContent = hargaJual.toLocaleString('id-ID');
            document.getElementById('totalPendapatan').textContent = totalPendapatan.toLocaleString('id-ID');
            document.getElementById('pendapatanBersih').textContent = pendapatanBersih.toLocaleString('id-ID');
            document.getElementById('hasil').style.display = 'block';
        }
    </script>
</body>

</html>